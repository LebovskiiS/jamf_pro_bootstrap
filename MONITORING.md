# üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

### **–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- ‚úÖ **Trivy** - –∞–Ω–∞–ª–∏–∑ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ **Bandit** - –∞–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Python –∫–æ–¥–∞
- ‚úÖ **Semgrep** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- ‚úÖ **Safety** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **pip-audit** - –∞—É–¥–∏—Ç Python –ø–∞–∫–µ—Ç–æ–≤

### **–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞:**
- ‚úÖ **Black** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- ‚úÖ **Flake8** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
- ‚úÖ **Pylint** - –∞–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ **MyPy** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
- ‚úÖ **–ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç root** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å jamf-api (UID 1000)
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ capabilities** - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
- ‚úÖ **no-new-privileges** - –∑–∞–ø—Ä–µ—Ç –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### **–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ `/metrics`:**
```
http_requests_total{method="POST",endpoint="create_request",status="200"}
http_request_duration_seconds
http_requests_active
container_cpu_usage_percent
container_memory_usage_percent
container_disk_usage_percent
```

## üöÄ –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:**
```bash
mkdir -p logs reports security
```

### **2. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**
```bash
docker-compose up -d
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
```bash
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs -f jamf-bootstrap-api

# –õ–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
tail -f logs/security-scan.log
```

## üìã –û—Ç—á–µ—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `/app/reports/`:**
- `trivy-container-report.json` - —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `safety-report.json` - —É—è–∑–≤–∏–º–æ—Å—Ç–∏ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `bandit-report.json` - –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞
- `semgrep-report.json` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
- `black-report.txt` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- `flake8-report.txt` - —Å—Ç–∏–ª—å –∫–æ–¥–∞
- `pylint-report.txt` - –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- `mypy-report.txt` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- `security-summary.txt` - —Å–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç

### **–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤:**
```bash
# –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç
cat reports/security-summary.txt

# –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
ls -la reports/
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### **–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞:**
```bash
# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec jamf-bootstrap-api /app/security-scan.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
docker exec jamf-bootstrap-api cat /app/reports/security-summary.txt
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```bash
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ù–ï –∑–∞–ø—É—â–µ–Ω –æ—Ç root
docker exec jamf-bootstrap-api whoami
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: jamf-api

# –ü—Ä–æ–≤–µ—Ä–∫–∞ UID
docker exec jamf-bootstrap-api id
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: uid=1000(jamf-api)
```

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –∫–æ–¥–µ
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- CPU > 80%
- Memory > 85%
- Disk > 90%
- HTTP –æ—à–∏–±–∫–∏ > 10/min

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
docker exec jamf-bootstrap-api ls -la /app/reports/

# –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –≤—Ä—É—á–Ω—É—é
docker exec jamf-bootstrap-api /app/security-scan.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
docker exec jamf-bootstrap-api tail -f /app/logs/security-scan.log
```

### **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker exec jamf-bootstrap-api whoami

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Ñ–∞–π–ª—ã
docker exec jamf-bootstrap-api ls -la /app/
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è jamf-api (–ù–ï root)
- [ ] –ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –û—Ç—á–µ—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ /app/reports/
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ /metrics
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ capabilities (cap_drop: ALL)
- [ ] no-new-privileges –≤–∫–ª—é—á–µ–Ω
- [ ] –õ–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ
